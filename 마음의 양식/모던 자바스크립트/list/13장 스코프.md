# 13장 스코프



## 1. 키워드로 선언한 변수의 중복 선언

- `var` 키워드로 선언한 변수는 같은 스코프 내에서 중복 선언을 허용합니다. 하지만 덮어 씌어집니다.
- `let` 또는 `const`는 같은 스코프 내에서 중복 선언이 에러를 발생시킵니다.

```js
function foo() {
	var x = 1;
	var x = 2;
	console.log(x); // 2
}

function bar() {
	let x = 1;
	let x = 2; // error 발생
	console.log(x);
}
```



## 2. 스코프 체인

- 모든 스코프는 하나의 **계층적 구조**로 연결되어 있으며, 모든 지역 스코프의 최상위 스코프는 **전역 스코프**입니다.
- 이렇게 스코프가 계층적으로 연결된 것을 **스코프 체인**이라고 부릅니다.
- 변수를 참조할 때 자바스크립트 엔진은 **스코프 체인**을 통해 변수를 참조하는 코드의 스코프에서 시작하여 상위 스코프 방향으로 이동하며 선언된 변수를 **검색**합니다.
- 스코프 체인은 **물리적**으로 정말 존재합니다.
  - 자바스크립트 엔진은 코드를 실행하기에 앞서 **렉시컬 환경**을 실제로 생성합니다.
  - **렉시컬 환경** : 코드가 어디서 실행되며 주변에 어떤 코드가 있는지를 의미합니다.
    - 스코프 체인은 실행 컨텍스트의 **렉시컬 환경**을 단방향으로 연결한 것입니다.





## 3. 렉시컬 스코프 또는 정적 스코프

- 자바스크립트는 렉시컬 스코프를 따르고 있습니다.
- 함수를 어디서 호출했는지가 아니라 함수를 **어디서 정의**했는지에 따라 상위 스코프가 결졍 됩니다.

```js
var x = 1;

function foo() {
  var x = 10;
  bar();
}

function bar() {
  console.log(x);
}

foo(); // 1
bar(); // 1
```

