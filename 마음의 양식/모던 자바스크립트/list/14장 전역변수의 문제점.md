# 14장. 전역 변수의 문제점



## 1. 문제점

- 암묵적 결합 : 코드 어디에서는 참조하고 할당할 수 있기 때문에 의도치 않게 상태가 변경되고 **위험성**이 증가하게 된다.
- 긴 생명주기 : **메모리 리소스**를 오랜시간 소비하게 되고 `var`같은 경우 **중복 선언**이 가능하므로 덮어 씌워지는 현상이 발생합니다.
- 스코프 체인 상에서 종점애 존재 : 변수를 검색할 때 가장 **마지막에 검색**됨으로 변수의 검색속도가 가장 느립니다.
- 네임스페이스 오염 : 자바스크립트의 가장 큰 문제점은 파일이 분리되어 있음에도 하나의 **전역 스코프를 공유**한다는 것입니다. 그래서 다른 파일 내에서 동일한 이름의 전역 변수나 전역 함수를 사용할 경우 예상치 못한 결과를 가져올 수 있습니다.



## 2. 전역 변수 억제하기

- 즉시 실행 함수 활용하기
  - 함수 정의와 동시에 호출되면서 모든 변수는 즉시 실행 함수의 지역 변수가 됩니다.

```js
(function () {
	var foo = 10;
}());

console.log(foo); // 에러발생
```

- 네임스페이스 객체
  - 전역에 네임스페이스 역할을 담당할 객체를 생성하고 프로퍼티로 추가하는 방법입니다.
  - 네임스페이스가 전역 변수에 해당하므로 그렇게 유용한 방법은 아닙니다.

```js
// 네임스페이스 객체
var MYAPP = {};

MYAPP.person = {
	name:'woo',
	address: 'gunsan'
}

console.log(MYAPP.person.name); // woo
```

- 클로저를 활용합니다.

```js
var Counter = (function () {
  // private 변수
  var num = 0;
  
  return {
    increase() {
      return ++num;
    }
  }
}())

console.log(Counter.num); // undefined
console.log(Counter.increase()); // 1
```

- ES6 모듈을 활용합니다.
  - 파일 자체의 독자적인 모듈 스코프를 제공합니다.
  - 따라서 모듈 내에서 선언한 `var`키워드는 전역변수가 아니며 window 객체의 프로퍼티도 아니게 됩니다.
  - IE 같은 구형 브라우저에서 동작하지 않습니다. ( 번들링 필요 )

```html
<script type="module" src='lib.js'></script>
```

